---
tags:
  - Studies
  - Acronym
  - Networking
  - CCNA
  - Theory
aliases:
  - Transport Control Protocol
description: A protocol which ensures reliable, connection-oriented data transfer.
---
Transmission Control Protocol (TCP), is a reliable and connection-oriented communication protocol used for transmitting data across networks. It ensures that data is delivered ==accurately and in the correct order==, establishing a ==dependable connection== between sender and receiver.

> [!note]
> TCP operates at layer four of [[The OSI Model]] or [[The TCP IP Model]]. Refer back to those for a recap of the purpose of layer four.

## Header

This is the TCP Header. It is considerably more complex than the [[UDP#Header]] for good reason. TCP carries out far more operations and is far more complex than UDP.

![[TCP-20240316160746160.webp#invert]]

## Benefits of TCP

TCP provides many benefits to traffic being sent over the network. Some of these benefits will be unique, however others will overlap with [[UDP]].

| Benefits               | Description                                                                                                                       |
| ---------------------- | --------------------------------------------------------------------------------------------------------------------------------- |
| Reliability            | TCP ensures reliable data transfer by re-sending unacknowledged segments and tracking their order through a sequence field.       |
| Tracking Segment Order | TCP allows hosts to track the order of received segments, ensuring proper sequencing of data during transmission.                 |
| Flow Control           | TCP enables the receiving device to regulate the data flow by instructing the sender to adjust the transmission rate accordingly. |
## How it Works

Before transmitting any actual non-TCP data, TCP will first initiate a connection between the server and the host.

In order for this to happen there are three steps. First, the first device will request a TCP connection by sending a packet containing a *SYN Flag* in the TCP header (which it will [[TCP#Sequencing|sequence]]). The server will then respond with a *SYN Flag*, ~~and~~ an *ACK Flag*. Finally, the original device will confirm the three-way handshake by responding with a final *ACK Flag* as shown in the image below:

![[TCP-20240306142745664.webp#invert]]

---

Data can now be transmitted and received by both parties.

---

Once all data has been sent that needs to be in the one connection, the connection must be terminated. This is commonly known as the ==four-way handshake==. It begins when the initiating device sends a *FIN Flag* in the TCP header which it will [[TCP#Sequencing|sequence]]. The server will respond with its own *FIN*, to which the original device will send an *ACK*. Thus the connection is terminated as shown below:

![[TCP-20240306143318849.webp#invert]]

## Session Multiplexing

Port numbers usually show up in pairs. Two devices on a network communicating will always ==send two port numbers==. 

The first one will be a *source* port which is randomly generated by the sender, whilst the other one will be the *identifying* port number for the particular application layer protocol which is in use.

Together, TCP ==uses this pair of [[Port Numbers|port numbers]]== to identify *sessions* which is defined as one particular exchange of data between two, or more, hosts pertaining to a certain operation such as a browser tab, or video stream. This keeps the different data streams from being accidentally confused.

When the reply comes back to the original device, these port numbers will be reversed. The random port number selected by the sending device will be the destination port number, and the service port number will be the source port number.

## Sequencing

Whenever TCP data is sent or received, it is sequenced.

This means that whenever a device sends information which forms ==part of a larger sequence==, it will choose a random initial sequence number and continue incrementing by one each time it sends the following segment. 

Any relies from a server in response will also be sequenced, but not in line with the initial sequencing. Instead, the server will ==randomly== decide upon its own ==sequence number== which it will stick to and increment in subsequent segments.

If an acknowledgement is not received for a particular segment with the correct sequence number, the segment will ==automatically be sent again==.

#### Window Size

The window size field in the TCP header allows the ==sequencing== to be ==delayed==. If the window size field is increased then more packets can be sent before the sending device requires an *ACK* for the segment(s).

![[TCP-20240306150238127.webp#invert]]

> [!example]-
> 
> In this three-way handshake example of sequencing, the initialising device chooses an initial sequence number of 10, and the server chooses 50.
> 
> ![[TCP-20240306143920253.webp#invert]]